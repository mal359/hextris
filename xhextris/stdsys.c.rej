*** stdsys.c	Tue Apr  6 22:21:20 1993
--- stdsys.c	Fri Apr 27 10:46:30 1990
***************
*** 99,105 ****
      char high_score_file_name[512];
      char buffer[40];
  
!     strcpy(high_score_file_name,HIGHSCOREFILE);
      
      if ((high_score_file = fopen(high_score_file_name , "r")) == NULL) {
  	fprintf(stderr,"xhextris: Can't open high score file.\n");
--- 99,106 ----
      char high_score_file_name[512];
      char buffer[40];
  
!     strcpy(high_score_file_name,HIGHSCOREDIR);
!     strcat(high_score_file_name,HIGHSCOREEXT);
      
      if ((high_score_file = fopen(high_score_file_name , "r")) == NULL) {
  	fprintf(stderr,"xhextris: Can't open high score file.\n");
***************
*** 119,126 ****
  	  break;
      }
      for (j = i; j < MAXHIGHSCORES; j++) {
! 	strcpy(high_scores[j].name,"nobody");
! 	strcpy(high_scores[j].userid,"NON");
  	high_scores[j].score = 0;
  	high_scores[j].rows = 0;
      }
--- 120,127 ----
  	  break;
      }
      for (j = i; j < MAXHIGHSCORES; j++) {
! 	strcpy(high_scores[j].name,"David Markley");
! 	strcpy(high_scores[j].userid,"CMU");
  	high_scores[j].score = 0;
  	high_scores[j].rows = 0;
      }
***************
*** 136,150 ****
  {
      int i;
      FILE *high_score_file;
      char high_score_file_name[512];
      char buffer[40];
      
!     strcpy(high_score_file_name,HIGHSCOREFILE);
      
  #ifdef AFS
      beGames();
  #endif
!     if ((high_score_file = fopen(high_score_file_name, "w")) == NULL) {
  	fprintf(stderr,"xhextris: Can't open high score file.\n");
  	return 0;
      }
--- 137,155 ----
  {
      int i;
      FILE *high_score_file;
+     char tmp_high_score_file_name[512];
      char high_score_file_name[512];
      char buffer[40];
      
!     strcpy(tmp_high_score_file_name,HIGHSCOREDIR);
!     strcat(tmp_high_score_file_name,uniqueid);
!     strcpy(high_score_file_name,HIGHSCOREDIR);
!     strcat(high_score_file_name,HIGHSCOREEXT);
      
  #ifdef AFS
      beGames();
  #endif
!     if ((high_score_file = fopen(tmp_high_score_file_name, "w")) == NULL) {
  	fprintf(stderr,"xhextris: Can't open high score file.\n");
  	return 0;
      }
***************
*** 160,166 ****
      }
      fflush(high_score_file);
      fclose(high_score_file);
! /*    rename(tmp_high_score_file_name,high_score_file_name);*/
  #ifdef AFS
      bePlayer();
  #endif
--- 165,171 ----
      }
      fflush(high_score_file);
      fclose(high_score_file);
!     rename(tmp_high_score_file_name,high_score_file_name);
  #ifdef AFS
      bePlayer();
  #endif
